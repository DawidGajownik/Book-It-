<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="${#locale.language}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="#{app.moderator.title}">Moderator Panel</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/company.css">
    <link rel="stylesheet" href="/css/month.css">
</head>
<style>
    .chat-container {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 1rem;
    }

    .chat-box {
        display: flex;
        flex-direction: column;
        height: 400px;
    }

    .chat-messages {
        flex: 1;
        overflow-y: auto;
        border: 1px solid #ddd;
        padding: 1rem;
        border-radius: 5px;
        margin-bottom: 1rem;
    }

    .chat-input {
        display: flex;
    }

    .chat-input input {
        flex: 1;
        padding: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 5px 0 0 5px;
    }

    .chat-input button {
        padding: 0.5rem 1rem;
        background: #4CAF50;
        color: white;
        border: none;
        border-radius: 0 5px 5px 0;
    }
</style>
<body>
<div th:insert="elements/navbar"></div>

<div class="hero" style="background: whitesmoke; height: auto; align-items: flex-start; color: #333333">

    <section class="section" style="width: 20%">
        <div th:insert="elements/dashboard"></div>
    </section>
    <!-- Zarządzanie usługami -->
    <section class="section" style="width: 90%">
        <div class="calendar-container" style="width: 90%">
            <div class="calendar-header">
                <button onclick="prevYear()">← year</button>
                <h1 id="currentYear"></h1>
                <button onclick="nextYear()">→ year</button>
            </div>
            <div class="calendar-header">
                <button onclick="prevMonth()">← month</button>
                <h2 id="currentMonth"></h2>
                <button onclick="nextMonth()">→ month</button>
            </div>

            <div class="calendar-grid">
                <div></div> <!-- Placeholder for week numbers -->
                <div class="day-header">Mon</div>
                <div class="day-header">Tue</div>
                <div class="day-header">Wed</div>
                <div class="day-header">Thu</div>
                <div class="day-header">Fri</div>
                <div class="day-header">Sat</div>
                <div class="day-header">Sun</div>
            </div>

            <div id="calendarDays" class="calendar-grid"></div>
        </div>

    </section>

    <!-- Zapraszanie użytkowników -->
    <section class="chat-container">
        <h2>Chat</h2>
        <div class="chat-box">
            <div class="chat-messages">
                <!-- Messages go here -->
            </div>
            <form class="chat-input">
                <input type="text" placeholder="Type a message..." required>
                <button type="submit">Send</button>
            </form>
        </div>
    </section>
</div>
<div th:insert="elements/footer"></div>

</body>
<script th:inline="javascript">

    const emailWrong = /*[[#{email.wrong}]]*/ "a"
    const invitationSent = /*[[#{invitation.sent}]]*/ "a"

    function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    function invite() {
        const role = document.getElementById("role")
        const email = document.getElementById("email")
        const emailMessage = document.getElementById("emailMessage")
        if (validateEmail(email.value)){
            emailMessage.innerText=invitationSent+' '+email.value
            emailMessage.style.color="green"
            fetch('/invite?email='+email.value+'&role='+role.value)
        }
        else {
            emailMessage.style.color="red"
            emailMessage.innerText=emailWrong
        }

        email.value=''
    }
</script>
<script th:inline="javascript">
    window.translations = { week: /*[[#{calendar.week}]]*/ 'Week' };
    window.serviceId = /*[[${serviceId}]]*/ 12;
    window.month = /*[[${month}]]*/ 1;
    window.year = /*[[${year}]]*/ 2025;
    window.monthName = /*[[${monthName}]]*/ "January";
    window.occupation = /*[[${occupation}]]*/ {1: 20, 2: 50, 3: 70};
</script>
<script src="/js/month.js"></script>
</html>
